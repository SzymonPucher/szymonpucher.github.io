---
import { type CollectionEntry, getCollection, render } from 'astro:content';
import BlogPost from '../../../layouts/BlogPost.astro';

export async function getStaticPaths() {
	const projects = await getCollection('projects');
	return projects.map((project) => {
		const [lang, ...slugParts] = project.id.split('/');
		const slug = slugParts.join('/');
		return {
			params: { lang, slug },
			props: project,
		};
	});
}
type Props = CollectionEntry<'projects'>;

const project = Astro.props;
const { Content } = await render(project);
---

<BlogPost {...project.data}>
    {project.data.link && (
        <p style="text-align: center; margin-bottom: 2rem;">
            <a href={project.data.link} target="_blank" rel="noopener noreferrer" style="display: inline-block; padding: 0.5rem 1rem; background: var(--accent); color: white; border-radius: 4px; text-decoration: none;">
                View Project
            </a>
        </p>
    )}
	<Content />
</BlogPost>
